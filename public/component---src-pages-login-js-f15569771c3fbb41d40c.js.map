{"version":3,"sources":["webpack:///./src/pages/login.js"],"names":["Card","styled","div","RedirectText","h2","Form","form","SubmitButton","Button","Input","TextField","Loader","LinearProgress","Info","LoginPage","useContext","AuthContext","signedIn","auth","useState","loading","setLoading","showForm","setShowForm","message","setMessage","error","setError","email","setEmail","password","setPassword","style","backgroundImage","headerImage","position","top","zIndex","height","width","opacity","backgroundRepeat","variant","color","className","ErrorText","onSubmit","e","preventDefault","login","then","response","console","log","setTimeout","window","location","pathname","catch","err","breakpoints","spacing","widths","id","type","fullWidth","placeholder","margin","label","onChange","target","value","to"],"mappings":"2FAAA,iKA8JMA,GAJUC,IAAOC,IAAV,qEAAGD,CAAH,sBAIAA,IAAOC,IAAV,kEAAGD,CAAH,4GAOJE,EAAeF,IAAOG,GAAV,0EAAGH,CAAH,2EAOZI,EAAOJ,IAAOK,KAAV,kEAAGL,CAAH,eAIJM,EAAeN,YAAOO,KAAV,0EAAGP,CAAH,MAEZQ,EAAQR,YAAOS,KAAV,mEAAGT,CAAH,0BAILU,EAASV,YAAOW,KAAV,oEAAGX,CAAH,sBAINY,EAAOZ,IAAOC,IAAV,kEAAGD,CAAH,+EAiBKa,UA9LG,WAAO,IAAD,EACKC,qBAAWC,KAA9BC,EADc,EACdA,SAAUC,EADI,EACJA,KADI,EAEQC,oBAAS,GAAhCC,EAFe,KAENC,EAFM,OAGUF,oBAAS,GAAlCG,EAHe,KAGLC,EAHK,OAIQJ,mBAAS,iBAAhCK,EAJe,KAINC,EAJM,OAKIN,oBAAS,GAA5BO,EALe,KAKRC,EALQ,KAOlBV,GACFQ,EAAW,yCARS,MAWIN,mBAAS,IAA5BS,EAXe,KAWRC,EAXQ,OAYUV,mBAAS,IAAlCW,EAZe,KAYLC,EAZK,KAsDtB,OACE,oCACE,kBAAC,IAAD,KACE,yBACEC,MAAO,CACLC,gBAAgB,OAAQC,IAAT,IACfC,SAAU,WACVC,IAAK,EACLC,QAAS,EACTC,OAAQ,QACRC,MAAO,OACPC,QAAS,EACTC,iBAAkB,YAGpBnB,EAWA,oCACGL,EACC,kBAACjB,EAAD,KACE,4DACA,mEACA,kBAAC,IAAD,CAAQ0C,QAAQ,YAAYC,MAAM,WAAlC,aAKF,kBAAC3C,EAAD,KACE,wBAAI4C,UAAU,SAAd,UAEClB,GAAS,kBAACmB,UAAD,KAAYrB,GACtB,kBAACnB,EAAD,CAAMyC,SAxEH,SAACC,GAChBA,EAAEC,iBAEF3B,GAAW,GACXE,GAAY,GACZE,EAAW,iBAEXP,EACG+B,MAAMrB,EAAOE,GAAU,GACvBoB,MAAK,SAACC,GACLC,QAAQC,IAAIF,GAEZG,YAAW,WACT7B,EAAW,+CACV,MACH6B,YAAW,WACTC,OAAOC,SAASC,SAAW,MAC1B,QAEJC,OAAM,SAACC,GACNP,QAAQC,IAAI,UAAWM,GACvBtC,GAAW,GACXE,GAAY,GACZI,GAAS,GACTF,EAAW,wCAiDD,kBAAC,IAAD,CAAKmC,YAAa,CAAC,KAAMC,QAAS,CAAC,KACjC,yBAAKC,OAAQ,CAAC,KACX,IACD,kBAACrD,EAAD,CACEsD,GAAG,QACHC,KAAK,OACLC,WAAS,EACTC,YAAY,QACZxB,QAAQ,WACRyB,OAAO,QACPC,MAAM,QACNC,SAxFK,SAACtB,GAC1BlB,EAASkB,EAAEuB,OAAOC,WA0FF,yBAAKT,OAAQ,CAAC,KACX,IACD,kBAACrD,EAAD,CACEsD,GAAG,WACHC,KAAK,WACLC,WAAS,EACTC,YAAY,WACZxB,QAAQ,WACRyB,OAAO,QACPC,MAAM,WACNC,SAzGQ,SAACtB,GAC7BhB,EAAYgB,EAAEuB,OAAOC,WA2GL,yBAAKT,OAAQ,CAAC,KACX,IACD,kBAACvD,EAAD,CAAcyD,KAAK,UAAnB,aAIN,kBAACnD,EAAD,8BAEE,kBAAC,OAAD,CAAM2D,GAAG,WAAT,cA5DR,kBAACxE,EAAD,KACE,kBAACG,EAAD,KAAeqB,GACdJ,GACC,oCAEE,kBAACT,EAAD,CAAQgC,MAAM","file":"component---src-pages-login-js-f15569771c3fbb41d40c.js","sourcesContent":["/* eslint-disable react/jsx-fragments */\nimport React, { useState, useContext } from 'react';\nimport styled from 'styled-components';\nimport TextField from '@material-ui/core/TextField';\nimport { withStyles, LinearProgress } from '@material-ui/core';\nimport { Link } from 'gatsby';\nimport headerImage from '../images/hero.png';\nimport Button from '../components/Button';\nimport Row from '../components/grid/row';\nimport { AuthContext } from '../auth/AuthProvider';\nimport Layout from '../components/layout/layout';\nimport Section from '../components/layout/Section';\n\nconst LoginPage = () => {\n  const { signedIn, auth } = useContext(AuthContext);\n  const [loading, setLoading] = useState(false);\n  const [showForm, setShowForm] = useState(true);\n  const [message, setMessage] = useState('Processing...');\n  const [error, setError] = useState(false);\n\n  if (signedIn) {\n    setMessage('Success. Redirecting to the homepage.');\n  }\n\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  const onPasswordInputChange = (e) => {\n    setPassword(e.target.value);\n  };\n\n  const onEmailInputChange = (e) => {\n    setEmail(e.target.value);\n  };\n\n  const onSubmit = (e) => {\n    e.preventDefault();\n\n    setLoading(true);\n    setShowForm(false);\n    setMessage('Processing...');\n\n    auth\n      .login(email, password, true)\n      .then((response) => {\n        console.log(response);\n\n        setTimeout(() => {\n          setMessage('Success! Redirecting to your dashboard...');\n        }, 1250);\n        setTimeout(() => {\n          window.location.pathname = '/';\n        }, 750);\n      })\n      .catch((err) => {\n        console.log('Error: ', err);\n        setLoading(false);\n        setShowForm(true);\n        setError(true);\n        setMessage('Incorrect username or password.');\n      });\n\n    // setTimeout(() => {\n    //   window.location.pathname = '/';\n    // }, 1500);\n  };\n\n  return (\n    <>\n      <Section>\n        <div\n          style={{\n            backgroundImage: `url(${headerImage})`,\n            position: 'absolute',\n            top: 0,\n            zIndex: -5,\n            height: '100vh',\n            width: '100%',\n            opacity: 1,\n            backgroundRepeat: 'repeat',\n          }}\n        />\n        {!showForm ? (\n          <Card>\n            <RedirectText>{message}</RedirectText>\n            {loading && (\n              <>\n                {/* <span>{message}</span> */}\n                <Loader color='primary' />\n              </>\n            )}\n          </Card>\n        ) : (\n          <>\n            {signedIn ? (\n              <Card>\n                <h2>You're already signed in! ðŸŽ‰</h2>\n                <p>Click the button to start exploring!</p>\n                <Button variant='contained' color='primary'>\n                  Let's Go\n                </Button>\n              </Card>\n            ) : (\n              <Card>\n                <h1 className='mb-sm'>Log In</h1>\n\n                {error && <ErrorText>{message}</ErrorText>}\n                <Form onSubmit={onSubmit}>\n                  <Row breakpoints={[769]} spacing={[12]}>\n                    <div widths={[12]}>\n                      {' '}\n                      <Input\n                        id='email'\n                        type='text'\n                        fullWidth\n                        placeholder='Email'\n                        variant='outlined'\n                        margin='dense'\n                        label='Email'\n                        onChange={onEmailInputChange}\n                      />\n                    </div>\n                    <div widths={[12]}>\n                      {' '}\n                      <Input\n                        id='password'\n                        type='password'\n                        fullWidth\n                        placeholder='Password'\n                        variant='outlined'\n                        margin='dense'\n                        label='Password'\n                        onChange={onPasswordInputChange}\n                      />\n                    </div>\n                    <div widths={[12]}>\n                      {' '}\n                      <SubmitButton type='submit'>Log In</SubmitButton>\n                    </div>\n                  </Row>\n                </Form>\n                <Info>\n                  Don't have an account?\n                  <Link to='/signup'>Sign Up</Link>\n                </Info>\n              </Card>\n            )}\n          </>\n        )}\n      </Section>\n    </>\n  );\n};\n\nconst Wrapper = styled.div`\n  max-width: 576px;\n`;\n\nconst Card = styled.div`\n  padding: 24px;\n  background: white;\n  border-radius: 3px;\n  box-shadow: 1px 1px 0px 0px #ddd, 2px 2px 5px 0px #eee;\n`;\n\nconst RedirectText = styled.h2`\n  text-align: center;\n  margin: 0 auto;\n  width: fit-content;\n  margin-bottom: 24px;\n`;\n\nconst Form = styled.form`\n  margin: 0;\n`;\n\nconst SubmitButton = styled(Button)``;\n\nconst Input = styled(TextField)`\n  margin: 0 !important;\n`;\n\nconst Loader = styled(LinearProgress)`\n  margin-top: 24px;\n`;\n\nconst Info = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  margin-top: 16px;\n`;\n\n// const FormWrapper = styled.div`\n//   width: 60%;\n//   margin: 0 auto;\n//   max-width: 540px;\n// `;\n\n// const Heading = styled.h1`\n//   text-align: center;\n// `;\n\nexport default LoginPage;\n"],"sourceRoot":""}